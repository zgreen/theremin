!function(e){function t(a){if(n[a])return n[a].exports;var o=n[a]={exports:{},id:a,loaded:!1};return e[a].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var a=window.webpackJsonp;window.webpackJsonp=function(n,r){for(var i,s,l=0,c=[];l<n.length;l++)s=n[l],o[s]&&c.push.apply(c,o[s]),o[s]=0;for(i in r)e[i]=r[i];for(a&&a(n,r);c.length;)c.shift().call(null,t)};var n={},o={0:0};return t.e=function(e,a){if(0===o[e])return a.call(null,t);if(void 0!==o[e])o[e].push(a);else{o[e]=[a];var n=document.getElementsByTagName("head")[0],r=document.createElement("script");r.type="text/javascript",r.charset="utf-8",r.async=!0,r.src=t.p+""+e+"."+({}[e]||e)+".bundle.js",n.appendChild(r)}},t.m=e,t.c=n,t.p="/theremin/build/",t(0)}([/*!********************!*\
  !*** ./src/app.js ***!
  \********************/
function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function r(){p.state.audioActive&&(p.state.gain.disconnect(p.audioCtx.destination),p.state.reverb.enabled||(p.state.convolver.disconnect(p.state.gain),p.state.oscillator.disconnect(p.state.convolver))),i().then(function(e){p.state.convolver.buffer=e,p.state.reverb.enabled&&p.state.convolver.connect(p.state.gain),p.state.oscillator.connect(p.state.reverb.enabled?p.state.convolver:p.state.gain),p.state.gain.connect(p.audioCtx.destination),p.state.oscillator.frequency.value=0,p.state.audioActive||(p.state.oscillator.start(),p.state.audioActive=!0)})}function i(){return new Promise(function(e,t){p.state.audioData.length?e(p.state.audioData):w().then(function(t){p.audioCtx.decodeAudioData(t).then(function(t){p.state.audioData=t,e(p.state.audioData)})})})}function s(){y().then(function(e){p.state.curNotes=e})}function l(){g.default.classList.add(h.view),p.state.viewEls.overlay.classList.add(h.overlay),p.state.viewEls.overlay.addEventListener("click",function(e){e.target.remove(),r()}),p.state.viewEls.controls.classList.add(h.controls),p.state.viewEls.allowedNotes.classList.add(h.notes),p.state.currentScale.map(function(e,t){var a=document.createElement("div"),n=document.createElement("label"),o=document.createElement("input");return n.innerHTML=e.name,o.type="checkbox",o.setAttribute("checked",!0),a.appendChild(n),a.appendChild(o),o.addEventListener("click",function(e){p.state.currentScale[t].disabled=!o.checked}),a}).reduce(function(e,t){return p.state.viewEls.allowedNotes.appendChild(t),e},[]),p.state.viewEls.waves.innerHTML=p.state.waves.map(function(e){return'<option value="'+e+'">'+e+"</option>"}).join(""),p.state.viewEls.noteDisplay.classList.add(h.noteDisplay),p.state.viewEls.waves.addEventListener("click",function(e){p.state.gain.gain.value=0}),p.state.viewEls.waves.addEventListener("change",function(e){p.state.oscillator.type=e.target.value}),p.state.viewEls.clampToNote.addEventListener("click",function(e){p.state.clampToNote=!p.state.clampToNote}),p.state.viewEls.bufferSrc.addEventListener("submit",function(e){e.preventDefault()}),p.state.viewEls.toggleVibrato.addEventListener("click",function(){c()}),p.state.viewEls.vibratoRate.value=p.state.vibrato.rate,p.state.viewEls.vibratoAmplitube.value=p.state.vibrato.amplitude,p.state.viewEls.vibratoRate.addEventListener("change",function(){c(c(p.state.viewEls.vibratoRate.value))}),p.state.viewEls.vibratoAmplitube.addEventListener("change",function(){c(p.state.vibrato.rate,p.state.viewEls.vibratoAmplitube.value)}),p.state.viewEls.toggleReverb.addEventListener("click",function(){p.state.reverb.enabled=!p.state.reverb.enabled,r()}),document.body.appendChild(g.default)}function c(e,t){e||t?(clearInterval(p.state.vibrato.interval),p.state.vibrato.rate=e,p.state.vibrato.amplitude=t,p.state.vibrato.interval=setInterval(v,p.state.vibrato.rate)):p.state.viewEls.toggleVibrato.checked?p.state.vibrato.interval=setInterval(v,p.state.vibrato.rate):clearInterval(p.state.vibrato.interval)}function u(e,t){g.default.style.background="hsla("+e+", "+t+"%, 50%, 1)"}function d(e){var t=p.state.currentScale.filter(function(e){return!e.disabled}).map(function(e){return e.name}),a=-1*e.clientY/window.innerHeight+1;p.state.gain.gain.value="sine"===p.state.oscillator.type||"triangle"===p.state.oscillator.type?a:a/10;var n=e.clientX/window.innerWidth*440+100,o=p.state.clampToNote?p.state.curNotes.reduce(function(e,a){var o=2===a.note.length;return Array.isArray(e)&&(t.indexOf(a.note.substr(0,o?1:2))!==-1&&a.frequency<n&&e.push(a),t.indexOf(a.note.substr(0,o?1:2))!==-1&&a.frequency>n&&(e=e[e.length-1])),e},[]):{frequency:n,note:"n/a"};p.state.oscillator.frequency.value=o.frequency,p.state.viewEls.noteDisplay.innerHTML="Current note: "+o.note,u(240+e.clientX/window.innerWidth*100,100*a)}function v(){p.state.oscillator.detune.value=p.state.oscillator.detune.value+p.state.vibrato.val,Math.abs(p.state.vibrato.val)>p.state.vibrato.amplitude?p.state.vibrato=f({},p.state.vibrato,{dir:p.state.vibrato.dir*-1,val:p.state.vibrato.val-1*p.state.vibrato.dir}):p.state.vibrato.val=p.state.vibrato.val+1*p.state.vibrato.dir}var f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},p=a(/*! ./state */4),b=a(/*! ./app.css */11),h=o(b),m=a(/*! ./view.html */1),g=n(m),y=a(/*! promise?global!./music-freqs.json */9),w=a(/*! promise?global!arraybuffer!./AbernyteGrainSilo.m4a */8);!function(){s(),l(),document.addEventListener("mousemove",d),document.addEventListener("touchmove",d)}()},/*!***********************!*\
  !*** ./src/view.html ***!
  \***********************/
function(e,t){e.exports='<div id=overlay>Heads up! This thing makes noise. It shouldn\'t be too loud, but consider turning down your speakers or headphones just in case. Click anywhere to begin.</div> <div id=theremin></div> <div id=controls> <label for=clamp-to-note>Clamp to note?</label> <input id=clamp-to-note type=checkbox> <form action=""> <label for=toggle-reverb>Enable reverb?</label> <input type=checkbox id=toggle-reverb> <label for=custom-buffer-source>Set a custom buffer source</label> <input id=custom-buffer-source type=text placeholder="Paste a URL to an audio file to use a the buffer"> <button type=submit>Get</button> </form> <form id=vibrato-settings action=""> <label for=enable-vibrato>Enable vibrato?</label> <input id=enable-vibrato type=checkbox> <label for=vibrato-rate>Vibrato rate</label> <input id=vibrato-rate type=number> <label for=vibrato-amplitude>Vibrato amplitude</label> <input id=vibrato-amplitude type=number> </form> <div id=vue-controls></div> <select name="" id=waves></select> <p id=note-display></p> <div id=allowed-notes></div> </div> ';var a=document.createElement("div");a.innerHTML=e.exports,e.exports=a},,,/*!**********************!*\
  !*** ./src/state.js ***!
  \**********************/
function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.state=t.audioCtx=void 0;var o=a(/*! ./view.html */1),r=n(o),i=t.audioCtx=window.AudioContext?new window.AudioContext:new window.webkitAudioContext;t.state={audioActive:!1,audioData:{},currentScale:[{name:"c",disabled:!1},{name:"c#",disabled:!1},{name:"d",disabled:!1},{name:"d#",disabled:!1},{name:"e",disabled:!1},{name:"f",disabled:!1},{name:"f#",disabled:!1},{name:"g",disabled:!1},{name:"g#",disabled:!1},{name:"a",disabled:!1},{name:"a#",disabled:!1},{name:"b",disabled:!1}],clampToNote:!1,convolver:i.createConvolver(),curNotes:[],gain:i.createGain(),oscillator:i.createOscillator(),reverb:{enabled:!1},waves:["sine","square","sawtooth","triangle"],overlayVisible:!0,vibrato:{dir:1,val:1,rate:10,amplitude:5,interval:function(){}},viewEls:{allowedNotes:r.default.querySelector("#allowed-notes"),bufferSrc:r.default.querySelector("#custom-buffer-source"),clampToNote:r.default.querySelector("#clamp-to-note"),controls:r.default.querySelector("#controls"),vibratoAmplitube:r.default.querySelector("#vibrato-amplitude"),vibratoRate:r.default.querySelector("#vibrato-rate"),noteDisplay:r.default.querySelector("#note-display"),overlay:r.default.querySelector("#overlay"),toggleReverb:r.default.querySelector("#toggle-reverb"),toggleVibrato:r.default.querySelector("#enable-vibrato"),waves:r.default.querySelector("#waves")},tremolo:{rate:10,amplitude:5,enabled:!1},effects:{vibrato:{},tremolo:{}}}},/*!***************************************************************************************************************!*\
  !*** ./~/css-loader?modules&localIdentName=[name]__[local]__[hash:base64:5]!./~/postcss-loader!./src/app.css ***!
  \***************************************************************************************************************/
function(e,t,a){t=e.exports=a(/*! ./../~/css-loader/lib/css-base.js */6)(),t.push([e.id,"html{box-sizing:border-box}*,:after,:before{box-sizing:inherit}body{color:#fff;cursor:crosshair;font-family:monospace;margin:0;text-shadow:1px 0 0 #111,0 1px 0 #111,-1px 0 0 #111,0 -1px 0 #111}.app__view__1ORZ5{height:100vh;overflow:hidden;width:100vw}h1{text-align:center}.app__controls__vqhHa{align-items:stretch;border-top:1px solid #111;bottom:0;color:#fff;padding:1em;display:flex;font-size:1.5rem;flex-wrap:wrap;justify-content:space-around;position:fixed;width:100%}.app__controls__vqhHa>*{align-items:center;display:flex;flex:0 1 auto;justify-content:center}.app__controls__vqhHa select{align-self:center}.app__currentNote__2wMcs{width:33%}.app__notes__2Tggs{justify-content:center;width:100%}.app__notes__2Tggs>*{margin-right:1em}.app__notes__2Tggs>:last-child{margin-right:0}.app__noteDisplay__3zARL{flex-shrink:0;width:100%}.app__overlay__31cgC{align-items:center;background:#111;display:flex;font-size:3em;height:100vh;padding:1em;position:absolute;top:0;width:100vw;z-index:1}",""]),t.locals={view:"app__view__1ORZ5",controls:"app__controls__vqhHa",currentNote:"app__currentNote__2wMcs",notes:"app__notes__2Tggs",noteDisplay:"app__noteDisplay__3zARL",overlay:"app__overlay__31cgC"}},/*!**************************************!*\
  !*** ./~/css-loader/lib/css-base.js ***!
  \**************************************/
function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var a=this[t];a[2]?e.push("@media "+a[2]+"{"+a[1]+"}"):e.push(a[1])}return e.join("")},e.i=function(t,a){"string"==typeof t&&(t=[[null,t,""]]);for(var n={},o=0;o<this.length;o++){var r=this[o][0];"number"==typeof r&&(n[r]=!0)}for(o=0;o<t.length;o++){var i=t[o];"number"==typeof i[0]&&n[i[0]]||(a&&!i[2]?i[2]=a:a&&(i[2]="("+i[2]+") and ("+a+")"),e.push(i))}},e}},,/*!************************************************************************************!*\
  !*** ./~/promise-loader?global!./~/arraybuffer-loader!./src/AbernyteGrainSilo.m4a ***!
  \************************************************************************************/
function(e,t,a){e.exports=function(){return new Promise(function(e){a.e(1,function(t){e(a(/*! !./~/arraybuffer-loader!./src/AbernyteGrainSilo.m4a */2))})})}},/*!********************************************************!*\
  !*** ./~/promise-loader?global!./src/music-freqs.json ***!
  \********************************************************/
function(e,t,a){e.exports=function(){return new Promise(function(e){a.e(2,function(t){e(a(/*! !./~/json-loader!./src/music-freqs.json */7))})})}},/*!*************************************!*\
  !*** ./~/style-loader/addStyles.js ***!
  \*************************************/
function(e,t,a){function n(e,t){for(var a=0;a<e.length;a++){var n=e[a],o=f[n.id];if(o){o.refs++;for(var r=0;r<o.parts.length;r++)o.parts[r](n.parts[r]);for(;r<n.parts.length;r++)o.parts.push(c(n.parts[r],t))}else{for(var i=[],r=0;r<n.parts.length;r++)i.push(c(n.parts[r],t));f[n.id]={id:n.id,refs:1,parts:i}}}}function o(e){for(var t=[],a={},n=0;n<e.length;n++){var o=e[n],r=o[0],i=o[1],s=o[2],l=o[3],c={css:i,media:s,sourceMap:l};a[r]?a[r].parts.push(c):t.push(a[r]={id:r,parts:[c]})}return t}function r(e,t){var a=h(),n=y[y.length-1];if("top"===e.insertAt)n?n.nextSibling?a.insertBefore(t,n.nextSibling):a.appendChild(t):a.insertBefore(t,a.firstChild),y.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");a.appendChild(t)}}function i(e){e.parentNode.removeChild(e);var t=y.indexOf(e);t>=0&&y.splice(t,1)}function s(e){var t=document.createElement("style");return t.type="text/css",r(e,t),t}function l(e){var t=document.createElement("link");return t.rel="stylesheet",r(e,t),t}function c(e,t){var a,n,o;if(t.singleton){var r=g++;a=m||(m=s(t)),n=u.bind(null,a,r,!1),o=u.bind(null,a,r,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(a=l(t),n=v.bind(null,a),o=function(){i(a),a.href&&URL.revokeObjectURL(a.href)}):(a=s(t),n=d.bind(null,a),o=function(){i(a)});return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else o()}}function u(e,t,a,n){var o=a?"":n.css;if(e.styleSheet)e.styleSheet.cssText=w(t,o);else{var r=document.createTextNode(o),i=e.childNodes;i[t]&&e.removeChild(i[t]),i.length?e.insertBefore(r,i[t]):e.appendChild(r)}}function d(e,t){var a=t.css,n=t.media;if(n&&e.setAttribute("media",n),e.styleSheet)e.styleSheet.cssText=a;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(a))}}function v(e,t){var a=t.css,n=t.sourceMap;n&&(a+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */");var o=new Blob([a],{type:"text/css"}),r=e.href;e.href=URL.createObjectURL(o),r&&URL.revokeObjectURL(r)}var f={},p=function(e){var t;return function(){return"undefined"==typeof t&&(t=e.apply(this,arguments)),t}},b=p(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),h=p(function(){return document.head||document.getElementsByTagName("head")[0]}),m=null,g=0,y=[];e.exports=function(e,t){t=t||{},"undefined"==typeof t.singleton&&(t.singleton=b()),"undefined"==typeof t.insertAt&&(t.insertAt="bottom");var a=o(e);return n(a,t),function(e){for(var r=[],i=0;i<a.length;i++){var s=a[i],l=f[s.id];l.refs--,r.push(l)}if(e){var c=o(e);n(c,t)}for(var i=0;i<r.length;i++){var l=r[i];if(0===l.refs){for(var u=0;u<l.parts.length;u++)l.parts[u]();delete f[l.id]}}}};var w=function(){var e=[];return function(t,a){return e[t]=a,e.filter(Boolean).join("\n")}}()},/*!*********************!*\
  !*** ./src/app.css ***!
  \*********************/
function(e,t,a){var n=a(/*! !./../~/css-loader?modules&localIdentName=[name]__[local]__[hash:base64:5]!./../~/postcss-loader!./app.css */5);"string"==typeof n&&(n=[[e.id,n,""]]);a(/*! ./../~/style-loader/addStyles.js */10)(n,{});n.locals&&(e.exports=n.locals)}]);
//# sourceMappingURL=app.bundle.js.map